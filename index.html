<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta property="og:type" content="website">
<meta property="og:title" content="金诚App团队blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="金诚App团队blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="金诚App团队blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title> 金诚App团队blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">金诚App团队blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/12/14/Apple Scheme URL Reference/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/12/14/Apple Scheme URL Reference/" itemprop="url">
                  About Apple URL Schemes 翻译一篇
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-14T11:20:25+08:00">
                2017-12-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Interpreter：戴奕</p>
<p>Apple 官方文档：《Apple Scheme URL Reference》翻译一篇。文虽短但里面还是有些有意思的东西。</p>
</blockquote>
<p>This document describes several URL schemes that are supported by system apps on iOS, macOS, and watchOS 2 and later. Native iOS apps and web apps running in Safari on any platform can use these schemes to integrate with system apps and provide a more seamless experience for the user. For example, if your iOS app displays telephone numbers, you could use an appropriate URL to launch the Phone app whenever someone taps one of those numbers. Similarly, clicking an iTunes link launches the iTunes app and plays the song specified in the link. When a user clicks a link, what happens depends on the platform and the installed system apps.</p>
<hr>
<p>本文档介绍了在 iOS、macOS 和 watchOS2 及以上版本的 watchOS 中所支持的几种系统 URL scheme。在任何平台上运行的 iOS 原生 app 或者 Safari 中的 web app 都可以使用这些 scheme 来提供一种无缝连接的用户体验。打个比方，如果你的 iOS app 显示了一串电话号码，你可以在用户点击电话号码的时候调用适当的URL来启动“电话”这个系统 app 来打电话。同样的，在点击一个 iTunes 链接的时候启动 iTunes app 并播放链接中指定的歌曲。当一个用户点击链接时，具体发生什么事情取决于当前操作系统和系统app。</p>
<p>This document describes those schemes that require special attributes or special formatting in order to be understood by the associated system app. As a result, this document does not describe all URL schemes supported on different Apple platforms.</p>
<hr>
<p>这个文档的目的是帮助读者理解那些必须使用特殊格式才能和系统 app 关联的 scheme。所以，这个文档并没有把所有 Apple 平台上支持的 URL scheme 都列举出来。</p>
<h2 id="At-a-Glance"><a href="#At-a-Glance" class="headerlink" title="At a Glance"></a>At a Glance</h2><p>You should read this document if you want to launch a system app from your iOS or macOS app, or from your web app running in Safari. This document contains both Cocoa Touch sample code—using the <code>openURL:options:completionHandler:</code> method of the shared <code>UIApplication</code> object to open URLs—and HTML samples.</p>
<hr>
<p>如果你想在 iOS app、macOS app 以及 Safari 的 web app 中启动系统 app，那么应该先读该文档。这个文档包含了 Cocoa Touch 中的例子——使用 <code>UIApplication</code> 单例中的 <code>openURL:options:completionHandler:</code> 方法，以及HTML中的例子。</p>
<h3 id="Composing-Items-Using-Mail"><a href="#Composing-Items-Using-Mail" class="headerlink" title="Composing Items Using Mail"></a>Composing Items Using Mail</h3><p>Use the <code>mailto</code> scheme to open the Mail app and populate a new email with information.</p>
<hr>
<p>使用 <code>mailto</code> scheme 打开邮件 app 并使用附带的信息生成新的邮件。</p>
<h4 id="Mail-Links"><a href="#Mail-Links" class="headerlink" title="Mail Links"></a>Mail Links</h4><p>The <code>mailto</code> scheme is used to launch the Mail app and open the email compose sheet. When specifying a <code>mailto</code> URL, you must provide the target email address. The following examples show strings formatted for Safari and for native apps.</p>
<hr>
<p><code>mailto</code> scheme 用来启动 邮件 app 并打开邮件编写页面。当指定一个 <code>mailto</code> URL的时候，你必须提供目标邮件的地址。以下的例子里列举了 Safari 和 原生 app 中的 scheme 格式：</p>
<ul>
<li>HTML link:</li>
</ul>
<p><code>&lt;a href=&quot;mailto:frank@wwdcdemo.example.com&quot;&gt;John Frank&lt;/a&gt;</code></p>
<ul>
<li>Native app URL string:</li>
</ul>
<p><code>mailto:frank@wwdcdemo.example.com</code></p>
<p>You can also include a subject field, a message, and multiple recipients in the To, Cc, and Bcc fields. (In iOS, the <code>from</code> attribute is ignored.) The following example shows a <code>mailto</code>URL that includes several different attributes:</p>
<hr>
<p>你还可以在scheme中包含主题、邮件内容、多个收件人、多个抄送以及密送人。以下例子中展示了一个包含多种不同属性的 <code>mailto</code> scheme：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mailto:foo@example.com?cc=bar@example.com&amp;subject=Greetings%20from%20Cupertino!&amp;body=Wish%20you%20were%20here!</div></pre></td></tr></table></figure>
<p>For detailed information on the format of the <code>mailto</code> scheme, see <a href="http://www.ietf.org/rfc/rfc2368.txt" target="_blank" rel="external">RFC 2368</a>.</p>
<hr>
<p>有关 <code>mailto</code> scheme 的详细格式方案信息，请参阅 <a href="http://www.ietf.org/rfc/rfc2368.txt" target="_blank" rel="external">RFC 2368</a>。</p>
<blockquote>
<p><strong>iOS Note:</strong> If the Mail app is not installed, clicking a <code>mailto</code> URL displays an appropriate warning message to the user.</p>
</blockquote>
<hr>
<blockquote>
<p>iOS 提醒：如果 邮件 app 没有安装，那么在点击 <code>mailto</code> URL 的时候会显示一个合适的警告给用户。</p>
</blockquote>
<h3 id="Starting-a-Phone-or-FaceTime-Conversation"><a href="#Starting-a-Phone-or-FaceTime-Conversation" class="headerlink" title="Starting a Phone or FaceTime Conversation"></a>Starting a Phone or FaceTime Conversation</h3><p>Use the <code>tel</code> and <code>facetime</code> schemes to initiate telephone or video conversations.</p>
<hr>
<p>使用 <code>tel</code> 和 <code>facetime</code> scheme 开始通话或发起一个视频会话。</p>
<h4 id="Phone-Links"><a href="#Phone-Links" class="headerlink" title="Phone Links"></a>Phone Links</h4><p>The <code>tel</code> URL scheme is used to launch the Phone app on iOS devices and initiate dialing of the specified phone number. When a user taps a telephone link in a webpage, iOS displays an alert asking if the user really wants to dial the phone number and initiates dialing if the user accepts. When a user opens a URL with the <code>tel</code> scheme in a native app, iOS 10.3 and later displays an alert and requires user confirmation before dialing. (When this scenario occurs in versions of iOS prior to 10.3, iOS initiates dialing without further prompting the user and does not display an alert, although a native app can be configured to display its own alert.)</p>
<hr>
<p><code>tel</code> URL scheme 用来启动 iOS 上的 电话 app 并向指定的手机号码拨号。当用户点击一个网页上的手机号链接时，iOS系统会弹出一个对话框询问用户是否要拨打当前这个号码，如果用户接受的话，就会向这个手机号拨号。当一个用户在 原生 app 上打开一个 <code>tel</code> scheme 时，如果是 iOS10.3 以及更高的系统版本的话，在拨打之前也会弹出一个确认框。（当这种情况发生在10.3以下的系统中时，iOS 不会提示用户也不会显示一个对话框，而会直接启动 电话 app 并拨打，除非 app 中自行弹出一个对话框。）</p>
<p>FaceTime in macOS 10.10 and later can also use the <code>tel</code> URL scheme to launch the Phone app on an iOS device by using Handoff. This scenario works when FaceTime is configured to dial phone numbers (the default configuration) and the iOS device is connected to the same iCloud account as the Mac.</p>
<hr>
<p>FaceTime 在 macOS 10.10 以及之后的系统中也可以使用 <code>tel</code> URL scheme 然后通过 Handoff 启动 iOS 设备上的 电话 app。这种情况只有在 FaceTime 配置为拨打电话号码（默认配置）并且 iOS 设备和 Mac 的 iCloud 账号为同一个账号时才会发生。（否则在 macOS 上使用 <code>tel</code> scheme 会直接打开 FaceTime app）。</p>
<p>You can specify phone links explicitly in both web and native iOS apps using the <code>tel</code> URL scheme. The following examples show the strings formatted for Safari and for a native app:</p>
<hr>
<p>在 web 和 原生 iOS app 上你都可以使用 <code>tel</code> URL scheme。以下的例子展示了该 scheme 的规则：</p>
<ul>
<li>HTML link:</li>
</ul>
<p><code>&lt;a href=&quot;tel:1-408-555-5555&quot;&gt;1-408-555-5555&lt;/a&gt;</code></p>
<ul>
<li>Native app URL string:</li>
</ul>
<p><code>tel:1-408-555-5555</code></p>
<p>To prevent users from maliciously redirecting phone calls or changing the behavior of a phone or account, the Phone app supports most, but not all, of the special characters in the <code>tel</code> scheme. Specifically, if a URL contains the <code>*</code> or <code>#</code> characters, the Phone app does not attempt to dial the corresponding phone number. If your app receives URL strings from the user or an unknown source, you should also make sure that any special characters that might not be appropriate in a URL are escaped properly. For native apps, use the <code>stringByAddingPercentEscapesUsingEncoding:</code> method of <code>NSString</code> to escape characters, which returns a properly escaped version of your original string.</p>
<hr>
<p>为了避免用户拨打恶意重定向电话或者更改电话、账号的行为，电话 app 支持 <code>tel</code> scheme 中大部分但并非全部的特殊字符。具体来说，如果 URL 中包含 <code>*</code> 或者 <code>#</code> 字符，电话 app 不会尝试拨打相应的手机号码。如果你的 app 收到用户或者未知来源的 URL 字符串，你应该确保 URL 中的特殊字符能够被正确转义。在原生 app 中，使用<code>NSString</code>类中的 <code>stringByAddingPercentEscapesUsingEncoding:</code> 方法来转义，该方法会返回转义后的字符串。</p>
<p>In Safari on iOS, telephone number detection is on by default. However, if your webpage contains numbers that can be interpreted as phone numbers, but are not phone numbers, you can turn off telephone number detection. You might also turn off telephone number detection to prevent the DOM document from being modified when parsed by the browser. To turn off telephone number detection in Safari on iOS, use the <code>format-detection</code> meta tag as follows:</p>
<hr>
<p>在 iOS 的 Safari 浏览器上，电话号码检测是默认开启的。但是如果你的网页上包含一些被误认为电话号码的数字，你可以关闭电话号码检测。为了防止浏览器解析DOM时篡改电话号码，你也可以关闭电话号码检测功能。使用 <code>format-detection</code> 标签来关闭 iOS 中的 Safari 电话检测功能，如下所示：</p>
<p><code>&lt;meta name = &quot;format-detection&quot; content = &quot;telephone=no&quot;&gt;</code></p>
<p>Listing 2-1 shows a simple webpage in which automatic telephone number detection is off. When displayed in Safari on iOS, the <code>408-555-5555</code> telephone number does not appear as a link. However, the <code>1-408-555-5555</code> number does appear as a link because it is in a phone link.</p>
<hr>
<p>2-1 清单展示了一个关闭电话检测的简单网页。当网页展示在 iOS 的 Safari 中时， <code>408-555-5555</code> 并不会展示成链接的样子。然而，<code>1-408-555-5555</code> 会被显示成一个链接因为它确实是一个超链接（标签）。</p>
<p><strong>Listing 2-1</strong>  Turning telephone number detection off</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"</span></div><div class="line">        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;</div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span> <span class="attr">xml:lang</span>=<span class="string">"en"</span> <span class="attr">lang</span>=<span class="string">"en"</span> &gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Telephone Number Detection<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span> = <span class="string">"viewport"</span> <span class="attr">content</span> = <span class="string">"width=device-width"</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!-- Turn off telephone number detection. --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span> = <span class="string">"format-detection"</span> <span class="attr">content</span> = <span class="string">"telephone=no"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!-- Then use phone links to explicitly create a link. --&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span>A phone number: <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"tel:1-408-555-5555"</span>&gt;</span>1-408-555-5555<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!-- Otherwise, numbers that look like phone numbers are not links. --&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">p</span>&gt;</span>Not a phone number: 408-555-5555<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<blockquote>
<p><strong>iOS Note:</strong> If the Phone app is not installed on the iOS device, opening a <code>tel</code> URL displays an appropriate warning message to the user.</p>
</blockquote>
<hr>
<blockquote>
<p>iOS 提醒：如果 电话 app 没有安装，那么在打开 <code>tel</code> URL 的时候会显示一个合适的警告给用户。</p>
</blockquote>
<p>For more information about the <code>tel</code> URL scheme, see <a href="http://www.ietf.org/rfc/rfc2806.txt" target="_blank" rel="external">RFC 2806</a> and <a href="http://www.ietf.org/rfc/rfc2396.txt" target="_blank" rel="external">RFC 2396</a>.</p>
<hr>
<p>有关 <code>tel</code> URL scheme 的详细信息，请参阅 <a href="http://www.ietf.org/rfc/rfc2806.txt" target="_blank" rel="external">RFC 2806</a> 和 <a href="http://www.ietf.org/rfc/rfc2396.txt" target="_blank" rel="external">RFC 2396</a>。</p>
<h4 id="FaceTime-Links"><a href="#FaceTime-Links" class="headerlink" title="FaceTime Links"></a>FaceTime Links</h4><p>The <code>facetime</code> URL scheme is used to initiate a FaceTime call to a specified user. You can use the phone number or email address of a user to initiate the call. When a user taps a FaceTime link in a webpage, iOS confirms that the user really wants to initiate a FaceTime call before proceeding. When an app opens a URL with the <code>facetime</code> scheme, iOS opens the FaceTime app and initiates the call without prompting the user. When opening FaceTime URLs on macOS, the system always prompts the user before initiating a call.</p>
<hr>
<p><code>faceTime</code> URL scheme 用来给指定用户发起 FaceTime 通话。你可以用户的使用电话号码或者邮件地址来发起。当用户点击一个网页上的 FaceTime 链接时， iOS 系统会在继续之前让用户进行确认。当一个 app 打开 <code>facetime</code> URL时， iOS 不会提示用户而是直接打开 FaceTime app。（实测iOS10以下不会提醒，iOS10及以上会弹出确认框）在 macOS 上打开 FaceTime URL 的时候，系统总是会在打开之前提醒用户。）</p>
<p>You can specify FaceTime links explicitly in both web and native iOS apps using the <code>facetime</code> URL scheme. The following examples show the strings formatted for Safari and for a native app:</p>
<hr>
<p>在 web 和 原生 iOS app 上你都可以使用 <code>facetime</code> URL scheme 来制定一个 FaceTime 链接。以下的例子展示了该格式的字符串：</p>
<ul>
<li>HTML links for FaceTime video calls:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"facetime:14085551234"</span>&gt;</span>Connect using FaceTime<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"facetime:user@example.com"</span>&gt;</span>Connect using FaceTime<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>HTML links for FaceTime audio calls (iOS only):</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"facetime-audio:14085551234"</span>&gt;</span>Connect using FaceTime<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"facetime-audio:user@example.com"</span>&gt;</span>Connect using FaceTime<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>Native app URL strings for FaceTime video calls:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">facetime://14085551234</div><div class="line">facetime://user@example.com</div></pre></td></tr></table></figure>
<ul>
<li>Native app URL strings for FaceTime audio calls (iOS only):</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">facetime-audio://14085551234</div><div class="line">facetime-audio://user@example.com</div></pre></td></tr></table></figure>
<p>To prevent users from maliciously redirecting calls or changing the behavior of a phone or account, the FaceTime app supports most, but not all, of the special characters in the <code>facetime</code> schemes. Specifically, if a URL contains the <code>*</code> or <code>#</code> characters, the app ignores those characters when they are included after the phone number. If your app receives URL strings from the user or from an unknown source, use the <code>stringByAddingPercentEscapesUsingEncoding:</code> method of <code>NSString</code> to generate a properly escaped version of the original string before opening the URL.</p>
<hr>
<p>为了避免用户拨打恶意重定向电话或者更改电话、账号的行为，FaceTime app 支持 <code>facetime</code> scheme 中大部分但并非全部的特殊字符。具体来说，如果 URL 中包含 <code>*</code> 或者 <code>#</code> 字符，并且当这些字符都在电话号码后面时，FaceTime app会忽略他们 。如果你的 app 收到用户或者未知来源的 URL 字符串，你可以使用<code>NSString</code>类中的 <code>stringByAddingPercentEscapesUsingEncoding:</code> 方法来转义后在进行打开。</p>
<blockquote>
<p><strong>iOS Note:</strong> If the FaceTime app is not installed on the iOS device or Mac, opening a <code>facetime</code> URL displays an appropriate warning message to the user. Prior to iOS 7, the Phone app handled FaceTime calls.</p>
</blockquote>
<hr>
<blockquote>
<p>iOS 提醒：如果在 iOS 或者 Mac 设备上 FaceTime app 没有安装，那么在打开 <code>facetime</code> URL 的时候会显示一个合适的警告给用户。在 iOS7 之前则会由 电话 app 来处理这个 scheme。</p>
</blockquote>
<h3 id="Specifying-Text-Messages"><a href="#Specifying-Text-Messages" class="headerlink" title="Specifying Text Messages"></a>Specifying Text Messages</h3><p>Use the <code>sms</code> scheme to compose a text message and specify a recipient.</p>
<hr>
<p>使用 <code>sms</code> scheme 来编写短信并指定接收人。</p>
<h4 id="SMS-Links"><a href="#SMS-Links" class="headerlink" title="SMS Links"></a>SMS Links</h4><blockquote>
<p><strong>iOS Note:</strong> SMS text links are supported on iOS only.</p>
</blockquote>
<hr>
<blockquote>
<p>iOS 提醒：短信链接只支持 iOS 设备。</p>
</blockquote>
<p>The <code>sms</code> scheme is used to launch the Messages app. The format for URLs of this type is “<code>sms:</code><em><phone></phone></em>”, where <em><phone></phone></em> is an optional parameter that specifies the target phone number of the SMS message. This parameter can contain the digits 0 through 9 and the plus (<code>+</code>), hyphen (<code>-</code>), and period (<code>.</code>) characters. The URL string must not include any message text or other information.</p>
<hr>
<p><code>sms</code> scheme 用来启动 短信 app。这个 URL 的格式是  “<code>sms:</code><em>&lt;手机号&gt;</em>”，<em>&lt;手机号&gt;</em>是一个可选参数，这是用来指定短信发送到谁的手机号上。这个参数里可以包含数字0~9，<code>+</code>，<code>-</code>，<code>.</code>。这个 URL 字符串中不能包含包括短信文本在内的其他信息。</p>
<p>The following examples show strings formatted for Safari and for native apps.</p>
<ul>
<li>HTML links:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sms:"</span>&gt;</span>Launch Messages App<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"sms:1-408-555-1212"</span>&gt;</span>New SMS Message<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>Native app URL strings:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sms:</div><div class="line">sms:1-408-555-1212</div></pre></td></tr></table></figure>
<h3 id="Opening-Locations-in-Maps"><a href="#Opening-Locations-in-Maps" class="headerlink" title="Opening Locations in Maps"></a>Opening Locations in Maps</h3><p>Use specially formatted URLs to open the Maps app and display directions or locations.</p>
<hr>
<p>用特定格式的 URL 来打开 地图 app 并显示指定方向或者坐标。</p>
<h4 id="Map-Links"><a href="#Map-Links" class="headerlink" title="Map Links"></a>Map Links</h4><p>The maps URL scheme is used to show geographical locations and to generate driving directions between two points. If your app includes address or location information, you can use map links to open that information in the Maps app in iOS or macOS.</p>
<hr>
<p>地图 URL scheme 用来显示地理位置以及两个地点之间的导航。如果你的 app 包含地址或者位置信息，你可以使用 map 链接在 iOS、macOS 地图 app 上打开该地址或位置。</p>
<p>Unlike some schemes, map URLs do not start with a “maps” scheme identifier. Instead, map links are specified as regular <code>http</code> links and are opened either in Safari or the Maps app on the target platform.</p>
<hr>
<p>map URL 不像其他一些 scheme 使用 “maps” 开头。取而代之的是使用常规的 <code>http</code> 链接，并在 Safari 或者其他平台的 地图 app 中打开。</p>
<p>Table 5-1 lists the supported parameters along with a brief description of each.</p>
<hr>
<p>表格 5-1 列举了每个支持的参数以及其简要说明。</p>
<p><strong>Table 5-1</strong>  Supported Apple Maps parameters</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Meaning</th>
<th>Values</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>t</code></td>
<td>The map type. If you don’t specify one of the documented values, the current map type is used.</td>
<td><code>m</code> (standard view)<code>k</code> (satellite view)<code>h</code> (hybrid view)<code>r</code> (transit view)</td>
</tr>
<tr>
<td><code>q</code></td>
<td>The query. This parameter is treated as if its value had been typed into the Maps search field by the user. Note that <code>q=*</code>is not supportedThe <code>q</code> parameter can also be used as a label if the location is explicitly defined in the <code>ll</code> or <code>address</code> parameters.</td>
<td>A URL-encoded string that describes the search object, such as “pizza,” or an address to be geocoded</td>
</tr>
<tr>
<td><code>address</code></td>
<td>The address. Using the address parameter simply displays the specified location, it does not perform a search for the location.</td>
<td>An address string that geolocation can understand.</td>
</tr>
<tr>
<td><code>near</code></td>
<td>A hint used during search. If the <code>sll</code> parameter is missing or its value is incomplete, the value of <code>near</code> is used instead.</td>
<td>A comma-separated pair of floating point values that represent latitude and longitude (in that order).</td>
</tr>
<tr>
<td><code>ll</code></td>
<td>The location around which the map should be centered.The <code>ll</code> parameter can also represent a pin location when you use the <code>q</code> parameter to specify a name.</td>
<td>A comma-separated pair of floating point values that represent latitude and longitude (in that order).</td>
</tr>
<tr>
<td><code>z</code></td>
<td>The zoom level. You can use the <code>z</code> parameter only when you also use the <code>sll</code> parameter; in particular, you can’t use <code>z</code> in combination with the <code>spn</code> or <code>sspn</code> parameters.</td>
<td>A floating point value between <code>2</code> and <code>21</code>that defines the area around the center point that should be displayed.</td>
</tr>
<tr>
<td><code>spn</code></td>
<td>The area around the center point, or <em>span</em>. The center point is specified by the <code>ll</code> parameter.You can’t use the <code>spn</code> parameter in combination with the <code>z</code> parameter.</td>
<td>A comma-separated pair of floating point values that represent latitude and longitude (in that order).</td>
</tr>
<tr>
<td><code>saddr</code></td>
<td>The source address to be used as the starting point for directions.A complete directions request includes the <code>saddr</code>, <code>daddr</code>, and <code>dirflg</code> parameters, but only the <code>daddr</code> parameter is required. If you don’t specify a value for <code>saddr</code>, the starting point is “here.”</td>
<td>An address string that geolocation can understand.</td>
</tr>
<tr>
<td><code>daddr</code></td>
<td>The destination address to be used as the destination point for directions.A complete directions request includes the <code>saddr</code>, <code>daddr</code>, and <code>dirflg</code> parameters, but only the <code>daddr</code> parameter is required.</td>
<td>An address string that geolocation can understand.</td>
</tr>
<tr>
<td><code>dirflg</code></td>
<td>The transport type.A complete directions request includes the <code>saddr</code>, <code>daddr</code>, and <code>dirflg</code> parameters, but only the <code>daddr</code> parameter is required. If you don’t specify one of the documented transport type values, the <code>dirflg</code> parameter is ignored; if you don’t specify any value, Maps uses the user’s preferred transport type or the previous setting.</td>
<td><code>d</code> (by car)<code>w</code> (by foot)<code>r</code> (by public transit)</td>
</tr>
<tr>
<td><code>sll</code></td>
<td>The search location. You can specify the <code>sll</code> parameter by itself or in combination with the <code>q</code> parameter. For example, <code>http://maps.apple.com/?sll=50.894967,4.341626&amp;z=10&amp;t=s</code> is a valid query.</td>
<td>A comma-separated pair of floating point values that represent latitude and longitude (in that order).</td>
</tr>
<tr>
<td><code>sspn</code></td>
<td>The screen span. Use the <code>sspn</code> parameter to specify a span around the search location specified by the <code>sll</code> parameter.</td>
<td>A comma-separated pair of floating point values that represent latitude and longitude (in that order).</td>
</tr>
</tbody>
</table>
<hr>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Meaning</th>
<th>Values</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>t</code></td>
<td>地图类型。如果你不指定文档中的任何类型，那么会使用地图当前的类型。</td>
<td><code>m</code> (标准视图)<code>k</code> (卫星视图)<code>h</code> (混合视图)<code>r</code> (交通视图)</td>
</tr>
<tr>
<td><code>q</code></td>
<td>查询参数。这个参数会被当成搜索值填入到地图的搜索框中。注意  <code>q=*</code> 是不支持的。如果位置由 <code>ll</code> 或者 <code>address</code> 参数明确地指定，那么 <code>q</code> 参数会被当做标签来对待。</td>
<td>经过URL编码的字符串，用来描述搜索对象，比如“披萨”，或者需要被地理编码的地点。</td>
</tr>
<tr>
<td><code>address</code></td>
<td>地址。使用地址参数只会简单显示地址的位置，并不会执行搜索该地址的操作。</td>
<td>一个可以识别的地址字符串。</td>
</tr>
<tr>
<td><code>near</code></td>
<td>搜索中的提示. 如果没有 <code>sll</code> 参数或者该参数的值不完整，那么将会使用 <code>near</code> 的值代替。</td>
<td>用逗号分隔的浮点数分别表示纬度和经度。</td>
</tr>
<tr>
<td><code>ll</code></td>
<td>表示地图中心点的坐标。当你使用 <code>q</code> 参数指定一个名字时，<code>ll</code> 参数会作为一个大头针放置在地图上进行展示。</td>
<td>用逗号分隔的浮点数分别表示纬度和经度。</td>
</tr>
<tr>
<td><code>z</code></td>
<td>缩放等级。<code>z</code> 参数只有在使用了 <code>sll</code> 参数后生效；一个比较特殊的地方是 <code>z</code> 不能和 <code>spn</code> 或者 <code>sspn</code> 参数共同使用。</td>
<td>用来显示地图中心点附近显示多大区域的值，必须介于 <code>2</code> 和 <code>21</code> 之间。</td>
</tr>
<tr>
<td><code>spn</code></td>
<td>地图中心点附件的区域大小，或者说是<em>跨度</em>。中心点必须由 <code>ll</code> 参数进行指定。你不能同时使用 <code>z</code> 和 <code>span</code> 两个参数。</td>
<td>用逗号分隔的浮点数分别表示纬度和经度。</td>
</tr>
<tr>
<td><code>saddr</code></td>
<td>一个指定线路的起点位置。一个完整的线路包含 <code>saddr</code>，<code>daddr</code>，<code>dirflg</code> 3个参数构成，但是只有 <code>daddr</code> 参数是必须的。如果你不指定 <code>saddr</code> 参数，那么起始点就是当前位置。</td>
<td>一个可以识别的地址字符串。</td>
</tr>
<tr>
<td><code>daddr</code></td>
<td>一个指定线路的目标位置。一个完整的线路包含 <code>saddr</code>，<code>daddr</code>，<code>dirflg</code> 3个参数构成，但是只有 <code>daddr</code> 参数是必须的。</td>
<td>一个可以识别的地址字符串。</td>
</tr>
<tr>
<td><code>dirflg</code></td>
<td>交通方式。一个完整的线路包含 <code>saddr</code>，<code>daddr</code>，<code>dirflg</code> 3个参数构成，但是只有 <code>daddr</code> 参数是必须的。如果该参数是除了文档内指定的类型以外，该参数将会被忽略；如果你不指定该参数，那么交通方式将会使用用户之前指定的方式。</td>
<td><code>d</code>（驾车）<code>w</code>（步行）<code>r</code> (公交)</td>
</tr>
<tr>
<td><code>sll</code></td>
<td>搜索的位置。你可以自己指定 <code>sll</code> 参数，并且可以与 <code>q</code> 参数组合使用。例如， <code>http://maps.apple.com/?sll=50.894967,4.341626&amp;z=10&amp;t=s</code> 是一个合法查询URL。</td>
<td>用逗号分隔的浮点数分别表示纬度和经度。</td>
</tr>
<tr>
<td><code>sspn</code></td>
<td>一个屏幕上的经纬度跨度。当使用 <code>sll</code> 参数指定搜索的位置时，你可以使用 <code>sspn</code> 参数指定经纬度跨度。</td>
<td>用逗号分隔的浮点数分别表示纬度和经度。</td>
</tr>
</tbody>
</table>
<p>You can use the maps URL scheme to help the user:</p>
<ul>
<li>Perform a search</li>
<li>Get directions to a location</li>
<li>View a specific location</li>
</ul>
<hr>
<p>你可以使用地图 URL scheme 帮助用户完成下面这些操作：</p>
<ul>
<li>搜索一个地点</li>
<li>给出前往指定地点的线路</li>
<li>查看一个指定的位置</li>
</ul>
<p>To perform a search, supply a properly encoded URL string as the value of the <code>q</code> parameter. For example:</p>
<hr>
<p>使用一个经过编码的正确的URL字符串作为 <code>q</code> 参数的值来执行搜索。举个例子：</p>
<p><code>http://maps.apple.com/?q=Mexican+Restaurant</code></p>
<p>To specify a location for search, you can supply a value for the <code>near</code> parameter, or combine the <code>sll</code> parameter with either the <code>z</code> or <code>sspn</code> parameters. You can also set the map type using the <code>t</code> parameter, as shown here:</p>
<hr>
<p>在搜索指定位置时，你可以使用 <code>near</code> 参数，或者结合 <code>z</code> 或者 <code>sspn</code> 和 <code>sll</code> 参数共同使用。当然你也可以使用 <code>t</code> 参数来指定地图类型，比如这样：</p>
<p><code>http://maps.apple.com/?q=Mexican+Restaurant&amp;sll=50.894967,4.341626&amp;z=10&amp;t=s</code></p>
<p>To provide navigation directions from one location to another, supply the start and destination addresses in the <code>saddr</code> and <code>daddr</code> parameters as shown below. You can also supply much more detail for the start and destination addresses than is shown here.</p>
<hr>
<p>使用 <code>saddr</code> 和 <code>daddr</code> 参数来指定起始以及目的地位置，从而提供导航功能。你还可以提供比如下示例中更多的详细参数。</p>
<p><code>http://maps.apple.com/?saddr=Cupertino&amp;daddr=San+Francisco</code></p>
<p>To specify a transport type, you can use the <code>dirflg</code> parameter as shown here:</p>
<hr>
<p>如下所示，你可以使用 <code>dirflg</code> 参数指定交通方式：</p>
<p><code>http://maps.apple.com/?saddr=San+Jose&amp;daddr=San+Francisco&amp;dirflg=r</code></p>
<p>You can omit the start address when you want to provide directions “from here.” The following example shows a search from here that provides driving directions in a hybrid map.</p>
<hr>
<p>当你想从当前位置开始查询线路时，你可以忽略起始位置参数。下面这个例子展示了在混合地图中使用驾车到达指定地点的线路。</p>
<p><code>http://maps.apple.com/?daddr=San+Francisco&amp;dirflg=d&amp;t=h</code></p>
<p>To display a specific location, use the <code>ll</code> parameter to center the map at the specified position as shown here:</p>
<hr>
<p>要显示特定的位置，那么使用 <code>ll</code> 参数来指定地图中心点的坐标，如下所示：</p>
<p><code>http://maps.apple.com/?ll=50.894967,4.341626</code></p>
<p>Another way to display a location is to specify an address, such as:</p>
<hr>
<p>另一种显示特定位置的方式是使用指定的地址，如下所示：</p>
<p><code>http://maps.apple.com/?address=1,Infinite+Loop,Cupertino,California</code></p>
<p>If you use both the <code>ll</code> and <code>address</code> parameters, <code>ll</code> takes precedence over <code>address</code>. If you include a name in the value of the <code>q</code> parameter, Maps tries to match the name at the specified location.</p>
<hr>
<p>如果你同时使用了 <code>ll</code> 和 <code>addres</code> 参数，那么会优先使用 <code>ll</code> 参数。如果你的参数中包含了 <code>q</code> 参数，那么 地图 app 会尝试在指定位置处匹配这个名称。</p>
<h3 id="Opening-Items-in-iTunes"><a href="#Opening-Items-in-iTunes" class="headerlink" title="Opening Items in iTunes"></a>Opening Items in iTunes</h3><p>Use specially formatted URLs to open iTunes and display items in the iTunes Music Store.</p>
<hr>
<p>用特定格式的 URL 来打开 iTunes app 并显示 iTunes 音乐商店中的指定项目。</p>
<h4 id="iTunes-Links"><a href="#iTunes-Links" class="headerlink" title="iTunes Links"></a>iTunes Links</h4><p>The iTunes URL scheme is used to link to content on the iTunes Music Store. The iTunes URL format is complicated to construct, so you create it using an online tool called iTunes Link Maker. The tool allows you to select a country destination and media type, and then search by song, album, or artist. After you select the item you want to link to, it generates the corresponding URL.</p>
<hr>
<p>iTunes URL scheme 用来链接到 iTunes 音乐商店。由于 iTunes URL 的格式比较复杂，所以你可以使用 iTunes Link Maker 这个在线工具来创建。通过该工具，你可以对国家、媒体类型进行筛选并搜索歌曲、专辑或艺术家。当你选择了项目后会生成相应的 URL 。</p>
<p>The following examples show the strings you would use in Safari and in a native iOS app to link to a song on the iTunes Music Store. The HTML example includes the complete link returned by the iTunes Link Maker tool, which includes a link to any appropriate artwork for the target link.</p>
<hr>
<p>下面这个例子展示了一个在 Safari 和 原生 iOS app 中可以使用的 URL 字符串。 HTML 例子中就包含了一个使用  iTunes Link Maker 工具生产的指向合适图片的链接。</p>
<ul>
<li>HTML link;</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewAlbum?i=156093464&amp;id=156093462&amp;s=143441"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span>=<span class="string">"15"</span> <span class="attr">width</span>=<span class="string">"61"</span> <span class="attr">alt</span>=<span class="string">"Randy Newman - Toy Story</span></span></div><div class="line">- You&amp;#39;ve Got a Friend In Me" <span class="attr">src</span>=<span class="string">"http://ax.phobos.apple.com.edgesuite.net/images/</span></div><div class="line">badgeitunes61x15dark.gif"&gt;<span class="tag">&lt;/<span class="name">img</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>Native app URL string:</li>
</ul>
<p><code>http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewAlbum?i=156093464&amp;id=156093462&amp;s=143441</code></p>
<p>For more information on creating iTunes links, see <a href="http://www.apple.com/itunes/linkmaker/faq/" target="_blank" rel="external">iTunes Link Maker FAQ</a>. That webpage contains a link to the iTunes Link Maker tool.</p>
<hr>
<p>有关 <code>iTunes</code> 链接 的详细格式方案信息，请参阅  <a href="http://www.apple.com/itunes/linkmaker/faq/" target="_blank" rel="external">iTunes Link Maker FAQ</a>。该网站中包含了 iTunes Link Maker 工具的链接。</p>
<h3 id="Opening-YouTube-Videos"><a href="#Opening-YouTube-Videos" class="headerlink" title="Opening YouTube Videos"></a>Opening YouTube Videos</h3><p>Use specially formatted URLs to open YouTube videos in Safari.</p>
<hr>
<p>在 Safari 中使用指定格式的 URL 打开 YouTube 视频。</p>
<h4 id="YouTube-Links"><a href="#YouTube-Links" class="headerlink" title="YouTube Links"></a>YouTube Links</h4><p>The YouTube URL scheme is used to connect to the YouTube website to play the specified video. If your app links to YouTube content, you can use this scheme to play videos from your app.</p>
<hr>
<p>YouTube URL scheme 用来打开 YouTube 网站并播放指定的视频。如果你的 app 有链接到 YouTube 的内容，那么你可以从 app 中跳转并播放视频。</p>
<p>Unlike some schemes, YouTube URLs do not start with a “youtube” scheme identifier. Instead, they are specified as regular <code>http</code> links but are targeted at the YouTube server. The following examples show the basic strings you would use in Safari and in an app to show a YouTube video. In each example, you would need to replace the <code>VIDEO_IDENTIFIER</code> value with the identifier of the video you wanted to display:</p>
<hr>
<p>YouTube URL 并不像其他 scheme 一样以 “youtube” 开头。而是使用指向 YouTube 服务的常规 <code>http</code> 链接。以下例子中展示了在 Safari 和 app 中用来展示 YouTube 视频的基本字符串。在每个例子中你需要将 <code>VIDEO_IDENTIFIER</code> 替换成你想要播放的视频 id ：</p>
<ul>
<li>HTML links:</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.youtube.com/watch?v=VIDEO_IDENTIFIER"</span>&gt;</span>Play Video<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.youtube.com/v/VIDEO_IDENTIFIER"</span>&gt;</span>Play Video<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>Native app URL strings:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://www.youtube.com/watch?v=VIDEO_IDENTIFIER</div><div class="line">http://www.youtube.com/v/VIDEO_IDENTIFIER</div></pre></td></tr></table></figure>
<blockquote>
<p><strong>iOS Note:</strong> If the YouTube video cannot be viewed on the device, iOS displays an appropriate warning message to the user.</p>
</blockquote>
<hr>
<blockquote>
<p>iOS 提醒：如果在该 YouTube 视频无法再设备上观看，那么 iOS 系统会显示一个合适的警告给用户。</p>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/21/XcodeDebug/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/21/XcodeDebug/" itemprop="url">
                  Xcode断点实用调试技巧
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-21T14:45:12+08:00">
                2017-07-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：王振华</p>
</blockquote>
<h1 id="Xcode断点实用调试技巧"><a href="#Xcode断点实用调试技巧" class="headerlink" title="Xcode断点实用调试技巧"></a>Xcode断点实用调试技巧</h1><p>断点是iOS开发中最常用的调试技巧，Xcode的断点功能是非常强大的，下面介绍一些常用的技巧。</p>
<h2 id="编辑断点"><a href="#编辑断点" class="headerlink" title="编辑断点"></a>编辑断点</h2><p>为了测试，我们先写一个简单的demo。<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">const</span> <span class="keyword">char</span> * argv[]) &#123;</div><div class="line">    <span class="keyword">@autoreleasepool</span> &#123;</div><div class="line">        <span class="comment">// insert code here...</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</div><div class="line">            <span class="built_in">NSLog</span>(<span class="string">@"%i"</span>,i);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后可以在for循环内加一个断点，并选择Edit Breakpoint。<br><img src="/img/XcodeDebug/XcodeDebug1.png" alt="1"></p>
<p>我们可以设置断点执行的condition，这里设置i==5。<br><img src="/img/XcodeDebug/XcodeDebug4.png" alt="4"><br><img src="/img/XcodeDebug/XcodeDebug3.png" alt="3"><br>可以看到，当运行到i==5时，断点被触发。<br>另外，也可以在ignore中选择忽略若干次循环。</p>
<p>action表示触发断点时执行的操作，这里的功能非常强大，除了常见的输出log信息，还可以播放声音，甚至运行脚本。<br><img src="/img/XcodeDebug/XcodeDebug7.png" alt="7"></p>
<p>在这里，我们选择忽略前两次循环，并打印i的值。<br><img src="/img/XcodeDebug/XcodeDebug2.png" alt="2"></p>
<p>可以看到输出结果。<br><img src="/img/XcodeDebug/XcodeDebug5.png" alt="5"></p>
<p>勾选option，可以在断点触发之后继续运行程序。</p>
<h2 id="异常捕获断点"><a href="#异常捕获断点" class="headerlink" title="异常捕获断点"></a>异常捕获断点</h2><p>当程序crash时，我们希望能准确定位到错误位置。但是Xcode有时并不能准确捕获，而是断在main函数里。这时可以增加一个全局的Exception Breakpoint。大多数异常都可以用这种方法捕获。<br><img src="/img/XcodeDebug/XcodeDebug6.png" alt="6"></p>
<h2 id="符号断点"><a href="#符号断点" class="headerlink" title="符号断点"></a>符号断点</h2><p>Symbolic Breakpoint也是一个全局断点，在断点的描述里可以设置Symbol（方法名）、Module（模块名）、Condition、Action等。例如，想在代码中查找是否有图片为nil，可以这样设置。arg3表示第一个参数，arg4表示第二个参数。<br><img src="/img/XcodeDebug/XcodeDebug8.png" alt="8"></p>
<p>当程序运行到有图片被设为nil时，就会触发断点。<br><img src="/img/XcodeDebug/XcodeDebug9.png" alt="9"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/05/iOS-socket/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/07/05/iOS-socket/" itemprop="url">
                  iOS 基于GCDAsyncSocket实现的即时聊天
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-05T16:20:25+08:00">
                2017-07-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：费宇超</p>
</blockquote>
<p>本文不讨论技术选型，不介绍业务逻辑。<br>简单地介绍下开发中会遇到的一些技术点，解决的一些方案。</p>
<h2 id="粘包"><a href="#粘包" class="headerlink" title="粘包"></a>粘包</h2><p>因为是基于TCP的，而TCP的是流式传输的，不像UDP数据报传输是有边界的，所以会有粘包问题。<br>然而这个问题是必须解决的，大致有三种方法。</p>
<p>1：固定包的长度，每次读数据的时候，固定读取字节。这在实际使用中基本不现实。</p>
<p>2：服务器每次发送消息的时候，给每个包添加上分隔符,如/r,/n。GCDAsyncSocket也有方法按照此逻辑直接切割。但这个方案也非常不靠谱。</p>
<p>3：一般的处理方法是定义一个消息头，消息头中包含了一个包的长度，先拿到包长度再去读取完整的包。</p>
<h3 id="Socket通信定义"><a href="#Socket通信定义" class="headerlink" title="Socket通信定义"></a>Socket通信定义</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">头信息：2字节 版本号</div><div class="line">功能代码：2字节  功能代码</div><div class="line">是否压缩：1个字节 0不压缩， 1压缩</div><div class="line">消息长度：2字节</div><div class="line">消息实体：</div></pre></td></tr></table></figure>
<p>功能代码是指消息的类型，定义了许多许多， 因为每个项目定义都不一样，就不介绍了。<br>按照我们的通信定义，我是这么处理粘包的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">    //解决粘包</div><div class="line">    //思路是拆分包头得到长度,判断接得到的长度和包头的长度是否一致，不够就继续拼接，相等就返回，大于的话就自己做下拆分。先</div><div class="line">- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag &#123;</div><div class="line">    if (tag == 0) &#123;</div><div class="line">        self.readBufferData = [data mutableCopy];</div><div class="line">         unsigned short dataLength;</div><div class="line">        if(data.length &gt;= 7)&#123;</div><div class="line">            dataLength = [self getDataLength:data];</div><div class="line">        &#125;else&#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        [self.socketManager.socket readDataToLength:dataLength withTimeout:-1 tag:1];</div><div class="line">    &#125;else if(tag == 1)&#123;</div><div class="line">        NSMutableData * completeData = self.readBufferData;</div><div class="line">        self.readBufferData = nil;</div><div class="line">        [completeData appendData:data];</div><div class="line">        [self handleData:completeData];</div><div class="line">        [self.socketManager.socket readDataToLength:7 withTimeout:-1 tag:0];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>简单解释下，上面的代理方法是GCDAsyncSocket读取数据方法，tag可以区分我的读数据请求，如上tag==0 是我发起的读消息头的返回，再用消息头中的字节长度去读完整的包，即tag==1的返回。</p>
<p>乍看一下似乎没有问题了，我也是这么以为的。同事之前写过量级比较大的通信，他遇到过问题，因为网卡缓冲区有个最大值，MTU，如果一下子来N多消息，字节会溢出，有可能会导致字节的少读多读。所以要严格按照代码以上的注释写代码，时间有限，我这边先不上代码。</p>
<h2 id="生成数据报和解数据报"><a href="#生成数据报和解数据报" class="headerlink" title="生成数据报和解数据报"></a>生成数据报和解数据报</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dataLength = [self getDataLength:data];</div></pre></td></tr></table></figure>
<p>上面的代码有这样一个方法。按照字节去拿数据。之前不太清楚苹果有API可以调用。自己写了2个压缩字节的，估计还有些问题。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">/** 将数值转成字节。编码方式：低位在前，高位在后 */</div><div class="line">- (NSData *)bytesFromValue:(NSInteger)value byteCount:(int)byteCount</div><div class="line">&#123;</div><div class="line">    NSAssert(value &lt;= 4294967295, @&quot;bytesFromValue: (max value is 4294967295)&quot;);</div><div class="line">    NSAssert(byteCount &lt;= 4, @&quot;bytesFromValue: (byte count is too long)&quot;);</div><div class="line">    </div><div class="line">    NSMutableData *valData = [[NSMutableData alloc] init];</div><div class="line">    NSUInteger tempVal = value;</div><div class="line">    int offset = 0;</div><div class="line">    </div><div class="line">    while (offset &lt; byteCount) &#123;</div><div class="line">        unsigned char valChar = 0xff &amp; tempVal;</div><div class="line">        [valData appendBytes:&amp;valChar length:1];</div><div class="line">        tempVal = tempVal &gt;&gt; 8;</div><div class="line">        offset++;</div><div class="line">    &#125;//while</div><div class="line">    </div><div class="line">    return [self dataWithReverse:valData];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="正确的做法如下"><a href="#正确的做法如下" class="headerlink" title="正确的做法如下"></a>正确的做法如下</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/**</div><div class="line"> *  生成数据报model</div><div class="line"> */</div><div class="line"></div><div class="line">-(NSData *)socketModelToData&#123;</div><div class="line">    NSString * bodyString = @&quot;&quot;;</div><div class="line">    if([self.body isKindOfClass:[NSDictionary class]])&#123;</div><div class="line">        bodyString = [self dictionnaryObjectToString:self.body];</div><div class="line">    &#125;</div><div class="line">    NSData * dataBody = [bodyString dataUsingEncoding:NSUTF8StringEncoding];</div><div class="line">    </div><div class="line">    unsigned short bVersion = htons((short)self.version);</div><div class="line">    NSMutableData *version = [[NSMutableData alloc] initWithBytes:&amp;bVersion length:2];</div><div class="line">    </div><div class="line">    unsigned short vFunctionCode = htons((short)self.functionCode);</div><div class="line">    [version appendBytes:&amp;vFunctionCode length:2];</div><div class="line">    </div><div class="line">    unsigned short typeIsZip = htons((short)0);</div><div class="line">    [version appendBytes:&amp;typeIsZip length:1];</div><div class="line">    </div><div class="line">    unsigned short vDataBodyLength = htons((short)dataBody.length);</div><div class="line">    [version appendBytes:&amp;vDataBodyLength length:2];</div><div class="line">    [version appendData:dataBody];</div><div class="line"></div><div class="line">    return version;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> *  解析数据报model</div><div class="line"> */</div><div class="line"></div><div class="line"></div><div class="line">- (DXSocketModel *)dataToSocketModel:(NSData *)data&#123;</div><div class="line">    </div><div class="line">    DXSocketModel * socketModel = [[DXSocketModel alloc] init];</div><div class="line">    unsigned short  version;</div><div class="line">    unsigned short  functionCode;</div><div class="line">    unsigned short  isGzip;</div><div class="line">    unsigned short  dataLength;</div><div class="line">   </div><div class="line">    [data getBytes:&amp;version range:NSMakeRange(0,2)];</div><div class="line">    [data getBytes:&amp;functionCode range:NSMakeRange(2,2)];</div><div class="line">    [data getBytes:&amp;isGzip range:NSMakeRange(4,1)];</div><div class="line">    [data getBytes:&amp;dataLength range:NSMakeRange(5,2)];</div><div class="line"> </div><div class="line">    </div><div class="line">    socketModel.version = ntohs(version);</div><div class="line">    socketModel.functionCode = ntohs(functionCode);</div><div class="line">    socketModel.isGzip =  ntohs(isGzip);</div><div class="line">    socketModel.dataLength = ntohs(dataLength);</div><div class="line">    </div><div class="line">//   if(socketModel.dataLength + 7 == data.length)&#123;</div><div class="line">    NSData * jsonData =  [data subdataWithRange:NSMakeRange(7,socketModel.dataLength)];</div><div class="line">    NSString * jsonStr = [[NSString alloc]initWithData:jsonData encoding:NSUTF8StringEncoding];</div><div class="line">    socketModel.body = [self dictionaryWithJsonString:jsonStr];</div><div class="line">//    &#125;else&#123;</div><div class="line">//        NSLog(@&quot;包头提示长度和实际长度不一样&quot;);</div><div class="line">//    &#125;</div><div class="line">    ;</div><div class="line">    return socketModel;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="网络字节序和主机字节序"><a href="#网络字节序和主机字节序" class="headerlink" title="网络字节序和主机字节序"></a>网络字节序和主机字节序</h2><p>如果你认真看了的话，你会发现生成数据和解析数据的时候，我用了这两个ntohs，htons函数，主要是生成的字节高低位和传输中的字节高低位不同。需要转换。</p>
<p>大端和小端（网络字节序和主机字节序）<br>大端（Big Endian）：即网络字节序。<br>小端（Littile Endian）：即主机字节序。<br>这里不得不感叹下API的丰富，方便了我们一批API调用者。<br><a href="http://blog.csdn.net/ce123_zhouwei/article/details/6971544" target="_blank" rel="external">详解大端模式和小端模式</a></p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>至于一些比较基本的问题：心跳包、断线重连（断线重连要区分是自己主动断开还是网络异常）、GCDAsyncSocket的一些代理方法（GCDAsyncSockets是非阻塞的），百度太多见，就不重复介绍了。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/19/iOS Crash 分析/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/19/iOS Crash 分析/" itemprop="url">
                  iOS Crash 分析
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-19T14:53:05+08:00">
                2017-06-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：郭滚华</p>
</blockquote>
<h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><p>应用崩溃影响用户体验，所以减少iOS应用奔溃是提高应用质量的重要途径。</p>
<h2 id="一、获取iOS应用-crash信息"><a href="#一、获取iOS应用-crash信息" class="headerlink" title="一、获取iOS应用 crash信息"></a>一、获取iOS应用 crash信息</h2><h3 id="1-通过itunes同步"><a href="#1-通过itunes同步" class="headerlink" title="1,通过itunes同步"></a>1,通过itunes同步</h3><ul>
<li>1，iOS设备上的应用闪退时, 操作系统会声称一个崩溃日志, 保存在设备上。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">路径是:  设置 -&gt; 隐私 -&gt;诊断与用量 -&gt;诊断与用量数据。在这里可以看到设备上所有的设备崩溃日志.</div><div class="line">在“诊断与用量”界面，建议用户选择自动发送，这样可以每天自动发送诊断和用量数据到itunes，来帮助开发者分析崩溃.</div></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/1290895-3d8b181cf40a9423.jpeg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>2，设备与电脑上的ITunes Store同步后, 会将崩溃日志保存在电脑上,崩溃日志保存在以下位置:  </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Mac OSX :~/Library/Logs/CrashReporter/MobileDevice/ </div><div class="line">可以看到所有和该电脑同步过的设备的崩溃日志(.crash文件)</div></pre></td></tr></table></figure>
<h3 id="2，使用Xcode"><a href="#2，使用Xcode" class="headerlink" title="2，使用Xcode"></a>2，使用Xcode</h3><ul>
<li><p>1，code的Window菜单下的organizer，然后点击Devices tab，然后选中左边的Device Logs。选中某一个崩溃日志，点击Export Log可导出崩溃日志(.crash文件)<br><img src="http://upload-images.jianshu.io/upload_images/1290895-886c9f44545ded5f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
</li>
<li><p>2,通过Xcode 获取appStore上架应用的crash信息。<br><img src="http://upload-images.jianshu.io/upload_images/1290895-cfe497d68d1279e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
</li>
</ul>
<h3 id="3，其他方式获取部分堆栈信息"><a href="#3，其他方式获取部分堆栈信息" class="headerlink" title="3，其他方式获取部分堆栈信息"></a>3，其他方式获取部分堆栈信息</h3><ul>
<li>1，通过代码获取应用的crash堆栈信息，然后下次启动时上传服务器获得日志信息。</li>
<li>2，通过友盟等第三方SDK拿到应用crash部分堆栈信息。<br>这种方式获取的应用信息都只有部分堆栈信息</li>
</ul>
<h2 id="二，获取应用的符号表"><a href="#二，获取应用的符号表" class="headerlink" title="二，获取应用的符号表"></a>二，获取应用的符号表</h2><h4 id="1，日志文件"><a href="#1，日志文件" class="headerlink" title="1，日志文件"></a>1，日志文件</h4><p>获取日志信息后，需要对堆栈调用信息分析<br><img src="http://upload-images.jianshu.io/upload_images/1290895-e416eb7ad0e83344.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>crash调用堆栈信息如图，有4列：第1列是栈顺序；第2列是二进制包名；第3列是运行地址；第四列是函数的动态加载地址，即加号前面的地址。</p>
<h4 id="2，dSYM文件"><a href="#2，dSYM文件" class="headerlink" title="2，dSYM文件"></a>2，dSYM文件</h4><p>在Xcode每次Archives的是都会生成dSYM文件，所有每次打包的时候的都需要保留包文件。点击.xcarchive文件，显示包含内容，在该目录下有生成的dSYM文件。dSYM文件也是Mach-o格式，Mach-O格式全称为Mach Object文件格式的缩写，是mac上可执行文件的格式，类似于windows上的PE格式 (Portable Executable ), Linux上的elf格式 (Executable and Linking Format)。<br>Mach-O可以分为3个部分</p>
<ul>
<li>(1)Header</li>
<li>(2)Segment</li>
<li>(3)section<br>header后面是segment，然后再跟着section，而一个segment是可以包含多个section的。MachOview工具可以可视化查看Mach-O文件格式，我们把dSYM文件放入可视化工具:<br><img src="http://upload-images.jianshu.io/upload_images/1290895-817730e6ff3cc19b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></li>
</ul>
<p>该dSYM文件包含armv7和arm64两种架构的符号表。其中arm64的偏移地址时835520</p>
<h4 id="3，UUID"><a href="#3，UUID" class="headerlink" title="3，UUID"></a>3，UUID</h4><p>每一个可执行程序都有一个build UUID来唯一标识。Crash日志包含发生crash的这个应用（app）的 build UUID以及crash发生的时候，应用加载的所有库文件的[build UUID]。UUID用来确定二进制包唯一标识</p>
<ul>
<li>查看日志文件的UUID</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">localhost:Test guogunhua$ grep &quot;crashTest arm64&quot; crashTest2017.crash </div><div class="line">0x1000cc000 - 0x1000d3fff crashTest arm64  &lt;87f22ef6f56d3c7fac969d3416cd328a&gt; /var/containers/Bundle/Application/13B84A6F-FB06-484B-8573-9390559A4A71/crashTest.app/crashTest</div></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">localhost:Test guogunhua$ grep --after-context=2 &quot;Binary Images:&quot; crashTest2017.crash </div><div class="line">Binary Images:</div><div class="line">0x1000cc000 - 0x1000d3fff crashTest arm64  &lt;87f22ef6f56d3c7fac969d3416cd328a&gt; /var/containers/Bundle/Application/13B84A6F-FB06-484B-8573-9390559A4A71/crashTest.app/crashTest</div><div class="line">0x100124000 - 0x100153fff dyld arm64  &lt;f54ed85a94253887886a8028e20ed8ba&gt; /usr/lib/dyld</div></pre></td></tr></table></figure>
<p>其中 0x1000cc000 就是模块的加载地址。</p>
<ul>
<li>查看二进制文件的UUID,dSYM文件</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">localhost:Test guogunhua$ xcrun dwarfdump --uuid dSYMs/crashTest.app.dSYM/Contents/Resources/DWARF/crashTest </div><div class="line">UUID: 6D16D164-DA42-31C8-8890-94895DB43C47 (armv7) dSYMs/crashTest.app.dSYM/Contents/Resources/DWARF/crashTest</div><div class="line">UUID: 87F22EF6-F56D-3C7F-AC96-9D3416CD328A (arm64) dSYMs/crashTest.app.dSYM/Contents/Resources/DWARF/crashTest</div></pre></td></tr></table></figure>
<p>或者appName.app／appName文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">localhost:Test guogunhua$ xcrun dwarfdump --uuid Products/Applications/crashTest.app/crashTest </div><div class="line">UUID: 6D16D164-DA42-31C8-8890-94895DB43C47 (armv7) Products/Applications/crashTest.app/crashTest</div><div class="line">UUID: 87F22EF6-F56D-3C7F-AC96-9D3416CD328A (arm64) Products/Applications/crashTest.app/crashTest</div></pre></td></tr></table></figure>
<p>需要三者的UUID的匹配才能正确的符号化。即都是：<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">## 三，符号化iOS Crash堆栈</div><div class="line">我们拿到的crash信息是堆栈调用信息，所有信息都是16进制的内存地址，不能分析应用crash的原因，需要符号化才能分析。</div><div class="line">### 1，使用Xcode</div><div class="line">对于已经上架了appStore的应用的来说，crash文件通过用户上传到苹果服务器，Xcode可以直接下载下来，看到堆栈符号化的堆栈信息就和开发调试一样方便。  </div><div class="line">![](http://upload-images.jianshu.io/upload_images/1290895-f50fc476b2d470a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line"></div><div class="line">### 2, symbolicatecrash</div><div class="line">symbolicatecrash是Xcode带的独立工具，可以拷贝出来使用。查找位置</div></pre></td></tr></table></figure></p>
<p>localhost:~ guogunhua$ find /Applications/Xcode.app -name symbolicatecrash -type f<br>/Applications/Xcode.app/Contents/SharedFrameworks/DVTFoundation.framework/Versions/A/Resources/symbolicatecrash</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">把symbolicatecrash和奔溃日志，APP对应的.dSYM文件放在同一文件夹下，执行如下命令：</div></pre></td></tr></table></figure>
<p>Symbolicatecrash + 崩溃日志.crash + APP对应的.dSYM文件 + &gt; + 输出到的文件，<br>或者<br>Symbolicatecrash + 崩溃日志.crash + appName.app/appName + &gt; + 输出到的文件，<br>如：<br>localhost:Test guogunhua$ ./symbolicatecrash crashTest2017.crash Products/Applications/crashTest.app/crashTest &gt; aa.log<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">符号化前</div></pre></td></tr></table></figure></p>
<p>Last Exception Backtrace:<br>0   CoreFoundation                    0x1843391b8 <strong>exceptionPreprocess + 124<br>1   libobjc.A.dylib                   0x182d7055c objc_exception_throw + 56<br>2   CoreFoundation                    0x1842147f4 -[</strong>NSArrayI objectAtIndex:] + 184<br>3   crashTest                         0x1000d0904 0x1000cc000 + 18692<br>4   crashTest                         0x1000d0864 0x1000cc000 + 18532<br>5   UIKit                             0x18a1ee924 -[UIViewController loadViewIfRequired] + 1056<br>6   UIKit                             0x18a1ee4ec -[UIViewController view] + 28<br>7   UIKit                             0x18a1f4c98 -[UIWindow addRootViewControllerViewIfPossible] + 76<br>8   UIKit                             0x18a1f2138 -[UIWindow _setHidden:forced:] + 272</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">symbolicatecrash 符号化后</div></pre></td></tr></table></figure>
<p>Last Exception Backtrace:<br>0   CoreFoundation                    0x1843391b8 <strong>exceptionPreprocess + 124<br>1   libobjc.A.dylib                   0x182d7055c objc_exception_throw + 56<br>2   CoreFoundation                    0x1842147f4 -[</strong>NSArrayI objectAtIndex:] + 184<br>3   crashTest                         0x1000d0904 -[ViewController crashTest] (ViewController.m:29)<br>4   crashTest                         0x1000d0864 -[ViewController viewDidLoad] (ViewController.m:22)<br>5   UIKit                             0x18a1ee924 -[UIViewController loadViewIfRequired] + 1056<br>6   UIKit                             0x18a1ee4ec -[UIViewController view] + 28<br>7   UIKit                             0x18a1f4c98 -[UIWindow addRootViewControllerViewIfPossible] + 76<br>8   UIKit                             0x18a1f2138 -[UIWindow _setHidden:forced:] + 272<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">可以看到第3，4行已经符号化了，显示了哪个文件具体行数，对应代码</div><div class="line">![](http://upload-images.jianshu.io/upload_images/1290895-b2d30b3ee626bcef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</div><div class="line"></div><div class="line">查看源码，找出代码crash的原因就容易的多了。但使用symbolicatecrash工具有很大的限制</div><div class="line"></div><div class="line">- 只能分析官方格式的崩溃日志，需要从具体的设备中导出，获取和操作都不是很方便</div><div class="line">- 符号化的结果也是没有具体的行号信息的，也经常会出现符号化失败的情况。</div><div class="line">- 实际上, Xcode的Organizer内置了symbolicatecrash工具，所以开发者才可以直接看到符号化的崩溃堆栈日志。</div><div class="line"></div><div class="line">### 3，使用命令行工具atos</div><div class="line">命令格式：</div></pre></td></tr></table></figure></p>
<p> atos -o executable -arch architecture -l loadAddress address<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">说明：  </div><div class="line"></div><div class="line">- executable dYSM文件或二进制执行文件appName.app/appName</div><div class="line">- loadAddress 表示函数的动态加载地址，对应崩溃地址堆栈中 + 号前面的地址，即0x1000cc000</div><div class="line">- address 表示运行时地址、对应崩溃地址堆栈中第一个地址，即0x1000d0904  ，实际上，崩溃地址堆栈中+号前后的地址相加即是运行时地址，即0x1000cc000 + 18692= 0x1000d0904</div><div class="line">- 执行命令查询地址的符号，可以看到如下结果：</div></pre></td></tr></table></figure></p>
<p>-[ViewController crashTest] (in crashTest) (ViewController.m:29)<br>```</p>
<h2 id="四，总结"><a href="#四，总结" class="headerlink" title="四，总结"></a>四，总结</h2><p>本文分析了如何获取用户的.crash文件，以及如何符号化的方法，对于分析应用crash很适用。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/14/super/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/06/14/super/" itemprop="url">
                  super关键字帮我们做了什么？
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-14T22:44:53+08:00">
                2017-06-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <blockquote>
<p>作者：戴奕</p>
</blockquote>
<p>本篇文章讲的是super的实际运作原理，如有同学对super与self的区分还有疑惑的，请参考ChenYilong大神的<a href="https://github.com/ChenYilong/iOSInterviewQuestions/blob/master/01%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88/%E3%80%8A%E6%8B%9B%E8%81%98%E4%B8%80%E4%B8%AA%E9%9D%A0%E8%B0%B1%E7%9A%84iOS%E3%80%8B%E9%9D%A2%E8%AF%95%E9%A2%98%E5%8F%82%E8%80%83%E7%AD%94%E6%A1%88%EF%BC%88%E4%B8%8A%EF%BC%89.md#21-%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E4%BB%80%E4%B9%88">《招聘一个靠谱的iOS》面试题参考答案（上）</a>。</p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2017/06/14/super/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/14/replicatorLayer/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/14/replicatorLayer/" itemprop="url">
                  CAReplicatorLayer创建加载动画
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-14T16:24:26+08:00">
                2017-04-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：周思思</p>
</blockquote>
<ul>
<li><strong>介绍：</strong>官方文档里写的是：<strong>“A layer that creates a specified number of copies of its sublayers (the source layer), each copy potentially having geometric, temporal, and color transformations applied to it.”</strong><br>简单的说它可以拷贝子layer，并和拷贝的子layer拥有一样的功能，比如属性、位置、形变、动画。进行一些不同的属性设置我们可以让它完成一些非常炫酷的动画。</li>
</ul>
<ul>
<li><strong>代码参考：</strong><a href="http://code.cocoachina.com/view/133667" target="_blank" rel="external">http://code.cocoachina.com/view/133667</a></li>
<li><p><strong>效果：</strong></p>
<p><img src="/img/replicatorLayer/replicatorLayer1.gif" alt="img"></p>
</li>
</ul>
<h2 id="CAReplicatorLayer的属性"><a href="#CAReplicatorLayer的属性" class="headerlink" title="CAReplicatorLayer的属性"></a>CAReplicatorLayer的属性</h2><p>想要了解一个对象最简单的入手点就是了解它的属性和方法</p>
<p><strong>CAReplicatorLayer</strong> 的属性和方法并不多，主要是：</p>
<p><img src="/img/replicatorLayer/replicatorLayer2.jpg" alt="MacDown Screenshot"></p>
<h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><h3 id="1-创建一个layer"><a href="#1-创建一个layer" class="headerlink" title="1.创建一个layer"></a>1.创建一个layer</h3><p><img src="/img/replicatorLayer/replicatorLayer3.jpg" alt="MacDown Screenshot"></p>
<h3 id="2-给layer添加形变动画"><a href="#2-给layer添加形变动画" class="headerlink" title="2.给layer添加形变动画"></a>2.给layer添加形变动画</h3><p><img src="/img/replicatorLayer/replicatorLayer4.jpg" alt="MacDown Screenshot"></p>
<h3 id="3-利用CAReplicatorLayer拷贝多个layer进行动画"><a href="#3-利用CAReplicatorLayer拷贝多个layer进行动画" class="headerlink" title="3.利用CAReplicatorLayer拷贝多个layer进行动画"></a>3.利用CAReplicatorLayer拷贝多个layer进行动画</h3><p><img src="/img/replicatorLayer/replicatorLayer5.jpg" alt="MacDown Screenshot"></p>
<h3 id="4-将创建的CAReplicatorLayer添加到所需的layer上"><a href="#4-将创建的CAReplicatorLayer添加到所需的layer上" class="headerlink" title="4.将创建的CAReplicatorLayer添加到所需的layer上"></a>4.将创建的CAReplicatorLayer添加到所需的layer上</h3><p><img src="/img/replicatorLayer/replicatorLayer6.jpg" alt="MacDown Screenshot"></p>
<h4 id="就这样，所需的加载效果的动画就完成了。"><a href="#就这样，所需的加载效果的动画就完成了。" class="headerlink" title="就这样，所需的加载效果的动画就完成了。"></a>就这样，所需的加载效果的动画就完成了。</h4><h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><p>分享几个讲解CAReplicatorLayer比较详细的blog以及demo，需要的可以再去加深了解，它能完成很多强大的动画</p>
<p><a href="http://www.ios-animations-by-emails.com/posts/2015-march#tutorial" target="_blank" rel="external">http://www.ios-animations-by-emails.com/posts/2015-march#tutorial</a><br><a href="https://zsisme.gitbooks.io/ios-/content/chapter6/careplicatorLayer.html" target="_blank" rel="external">https://zsisme.gitbooks.io/ios-/content/chapter6/careplicatorLayer.html</a><br><a href="https://github.com/zhoubo2015/CAReplicatorLayerDemo" target="_blank" rel="external">https://github.com/zhoubo2015/CAReplicatorLayerDemo</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/14/iOS链式编程/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/14/iOS链式编程/" itemprop="url">
                  链式编程简单的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-14T15:35:34+08:00">
                2017-04-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：邵雄华</p>
</blockquote>
<p>  链式编程－顾名思义，链式，连贯性为其主要特征，放在编程领域来讲，说简单点就是把一系列的代码执行动作串联起来，不用单独一个一个的执行<br>在使用 Masonry 和 SDAutoLayout 框架实现自动布局的时候，进行了对比</p>
<h4 id="Masonry"><a href="#Masonry" class="headerlink" title="Masonry:"></a>Masonry:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[View mas_makeConstraints:^(MASConstraintMaker *make) &#123;</div><div class="line">      make.top.equalTo(anotherView);</div><div class="line">      make.left.equalTo(anotherView);</div><div class="line">      make.width.mas_equalTo(@60);</div><div class="line">      make.height.mas_equalTo(@60);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<h4 id="SDAutoLayout"><a href="#SDAutoLayout" class="headerlink" title="SDAutoLayout:"></a>SDAutoLayout:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">View.sd_layout</div><div class="line">.leftSpaceToView(self.view, 10)</div><div class="line">.topSpaceToView(self.view, 80)</div><div class="line">.heightIs(130)</div><div class="line">.widthRatioToView(self.view, 0.4);</div></pre></td></tr></table></figure>
<p>相比较两种实现方法来看，SDAutoLayout相对来说更简单，代码量更少，也更容易理解和使用！</p>
<p>这里说一下我对这两个框架的一点理解<br>Masonry 和 SDAutoLayout 实现思路：链式编程思想。</p>
<h4 id="链式编程"><a href="#链式编程" class="headerlink" title="链式编程"></a>链式编程</h4><ul>
<li><p>链式编程思想：是将多个操作（多行代码）通过点号(.)链接在一起成为一句代码,使代码可读性好。a(1).b(2).c(3)</p>
</li>
<li><p>链式编程特点：方法的返回值是block,block必须有返回值（本身对象），block参数（需要操作的值）</p>
</li>
<li><p>代表：Masonry框架、SDAutoLayout框架</p>
</li>
</ul>
<h3 id="链式编程另一个关键点－－block："><a href="#链式编程另一个关键点－－block：" class="headerlink" title="链式编程另一个关键点－－block："></a>链式编程另一个关键点－－block：</h3><h5 id="Block的定义格式"><a href="#Block的定义格式" class="headerlink" title="Block的定义格式"></a>Block的定义格式</h5><p>返回值类型(^block变量名)(形参列表) = ^(形参列表) {<br>};<br>调用Block保存的代码<br>block变量名(实参);</p>
<p>默认情况下,Block内部不能修改外面的局部变量<br>Block内部可以修改使用__block修饰的局部变量</p>
<h5 id="Block的模式"><a href="#Block的模式" class="headerlink" title="Block的模式"></a>Block的模式</h5><p>1.无参数无返回值的Block<br>2.有参数无返回值的Block<br>3.有参数有返回值的Block</p>
<p>Block简单用法举例</p>
<p>无参数无返回值的Block</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> *  无参数无返回值的Block</div><div class="line"> */</div><div class="line">- (void)func1 &#123;</div><div class="line">    /**</div><div class="line">     *  void ：就是无返回值</div><div class="line">     *  emptyBlock：就是该block的名字</div><div class="line">     *  ()：这里相当于放参数。由于这里是无参数，所以就什么都不写</div><div class="line">     */</div><div class="line">    void (^emptyBlock)() = ^()&#123;</div><div class="line">        NSLog(@&quot;无参数,无返回值的Block&quot;);</div><div class="line">    &#125;;</div><div class="line">    emptyBlock();</div><div class="line">&#125;</div><div class="line">有参数无返回值的Block</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">     *  调用这个block进行两个参数相加</div><div class="line">     *</div><div class="line">     *  @param int 参数A</div><div class="line">     *  @param int 参数B</div><div class="line">     *</div><div class="line">     *  @return 无返回值</div><div class="line">     */</div><div class="line">    void (^sumBlock)(int ,int ) = ^(int a,int b)&#123;</div><div class="line">        NSLog(@&quot;%d + %d = %d&quot;,a,b,a+b);</div><div class="line">    &#125;;</div><div class="line">    /**</div><div class="line">     *  调用这个sumBlock的Block，得到的结果是20</div><div class="line">     */</div><div class="line">    sumBlock(10,10);</div><div class="line">有参数有返回值的Block</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">     *  有参数有返回值</div><div class="line">     *</div><div class="line">     *  @param NSString 字符串1</div><div class="line">     *  @param NSString 字符串2</div><div class="line">     *</div><div class="line">     *  @return 返回拼接好的字符串3</div><div class="line">     */    </div><div class="line">    NSString* (^logBlock)(NSString *,NSString *) = ^(NSString * str1,NSString *str2)&#123;</div><div class="line">        return [NSString stringWithFormat:@&quot;%@%@&quot;,str1,str2];</div><div class="line">    &#125;;</div><div class="line">    //调用logBlock,输出的是 我是Block</div><div class="line">    NSLog(@&quot;%@&quot;, logBlock(@&quot;我是&quot;,@&quot;Block&quot;));</div></pre></td></tr></table></figure>
<h5 id="Block结合typedef使用"><a href="#Block结合typedef使用" class="headerlink" title="Block结合typedef使用"></a>Block结合typedef使用</h5><p>自己定义一个Block类型，用定义的类型去创建Block，更加简单便捷。</p>
<p>这里举一个例子 UIButton 的链式编程实现</p>
<h6 id="CHButton-h"><a href="#CHButton-h" class="headerlink" title="CHButton.h"></a>CHButton.h</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">//</div><div class="line">//  CHButton.h</div><div class="line">//  testDemo</div><div class="line">//</div><div class="line">//  Created by 邵雄华 on 2017/4/13.</div><div class="line">//  Copyright © 2017年 sxh. All rights reserved.</div><div class="line">//</div><div class="line"></div><div class="line">#import &lt;UIKit/UIKit.h&gt;</div><div class="line"></div><div class="line">@class CHButton;</div><div class="line"></div><div class="line">//typedef一个返回值为CHButton* 参数为NSString* 的名字为ChainButtonStringBlock的block,方便以后快速定义该类型block</div><div class="line"></div><div class="line">typedef CHButton *(^ChainButtonStringBlock)(NSString *aName);</div><div class="line"></div><div class="line">typedef CHButton *(^ChainButtonIntegerBlcok)(NSUInteger aNumber);</div><div class="line"></div><div class="line">typedef CHButton *(^ChainButtonColorBlock)(UIColor *aColor);</div><div class="line"></div><div class="line">typedef CHButton *(^ChainButtonFrameBlock)(CGRect aframe);</div><div class="line"></div><div class="line">@interface CHButton : UIButton</div><div class="line"></div><div class="line"></div><div class="line">- (ChainButtonStringBlock)imageName;</div><div class="line"></div><div class="line">- (ChainButtonStringBlock)title;</div><div class="line"></div><div class="line">- (ChainButtonIntegerBlcok)titleFont;</div><div class="line"></div><div class="line">- (ChainButtonColorBlock)textColor;</div><div class="line"></div><div class="line">- (ChainButtonFrameBlock)btnframe;</div><div class="line"></div><div class="line"></div><div class="line">//该方法为工厂方法,能够快速创建一个ChainButton,在一个参数为block的方法中一次性设置好你需要的ChainButton</div><div class="line">+ (CHButton *)makeJJButton:(void (^)(CHButton *))block;</div><div class="line"></div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h6 id="CHButton-m"><a href="#CHButton-m" class="headerlink" title="CHButton.m"></a>CHButton.m</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">//</div><div class="line">//  CHButton.m</div><div class="line">//  testDemo</div><div class="line">//</div><div class="line">//  Created by 邵雄华 on 2017/4/13.</div><div class="line">//  Copyright © 2017年 sxh. All rights reserved.</div><div class="line">//</div><div class="line"></div><div class="line">#import &quot;CHButton.h&quot;</div><div class="line"></div><div class="line">@implementation CHButton</div><div class="line"></div><div class="line">- (ChainButtonStringBlock)imageName&#123;</div><div class="line">    return ^CHButton *(NSString *aName)&#123;</div><div class="line">        [self setImage:[UIImage imageNamed:aName] forState:UIControlStateNormal];</div><div class="line">        NSLog(@&quot;imageName&quot;);</div><div class="line">        return self;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (ChainButtonStringBlock)title&#123;</div><div class="line">    return ^CHButton *(NSString *aName)&#123;</div><div class="line">        [self setTitle:aName forState:UIControlStateNormal];</div><div class="line">        NSLog(@&quot;title&quot;);</div><div class="line">        return self;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (ChainButtonIntegerBlcok)titleFont&#123;</div><div class="line">    return ^CHButton *(NSUInteger aNumber)&#123;</div><div class="line">        self.titleLabel.font = [UIFont systemFontOfSize:aNumber];</div><div class="line">        NSLog(@&quot;titleFont&quot;);</div><div class="line">        return self;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (ChainButtonColorBlock)textColor&#123;</div><div class="line">    return ^CHButton *(UIColor *aColor)&#123;</div><div class="line">        [self setTitleColor:aColor forState:UIControlStateNormal];</div><div class="line">        NSLog(@&quot;textColor = %@&quot;,aColor);</div><div class="line">        return self;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (ChainButtonFrameBlock)btnframe&#123;</div><div class="line">    return ^CHButton *(CGRect btnframe)&#123;</div><div class="line">        [self setFrame:btnframe];</div><div class="line">        return self;</div><div class="line">    &#125;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">+ (CHButton *)makeJJButton:(void (^)(CHButton *))block&#123;</div><div class="line">    CHButton * button = [[CHButton alloc] init];</div><div class="line">    block(button);</div><div class="line">    return button;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h5 id="使用方法-利用工厂模式创建一个CHButton"><a href="#使用方法-利用工厂模式创建一个CHButton" class="headerlink" title="使用方法:利用工厂模式创建一个CHButton"></a>使用方法:利用工厂模式创建一个CHButton</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[CHButton makeJJButton:^(CHButton *button) &#123;</div><div class="line">        button.title(@&quot;xixixi&quot;).imageName(@&quot;abc&quot;).titleFont(20).textColor([UIColor orangeColor]).btnframe(CGRectMake(100, 100, 100, 100));</div><div class="line">        button.frame = CGRectMake(100, 250, 100, 100);</div><div class="line">        [self.view addSubview:button];</div><div class="line">        [button addTarget:self action:@selector(didClick:) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">    &#125;];</div></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>链式编程要返回自身，每一个链式方法都必须返回明确的类型才能一直点下去，使用protocol或继承都不行，必须在每一个方法的声明时明确返回对象的类型。所以链式文件中不但有该类的方法声明，也有父类的方法声明。</p>
<p>后续会对更多的类进行链式的一种封装，提高开发的效率。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-Git " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/13/关于Git的使用过程中的一些不必要的文件的提交/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/13/关于Git的使用过程中的一些不必要的文件的提交/" itemprop="url">
                  关于Git的使用过程中的一些不必要的文件的提交
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-13T11:31:33+08:00">
                2017-04-13
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p> 作者：邵雄华</p>
</blockquote>
<h2 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h2><h4 id="1-cd到工程目录"><a href="#1-cd到工程目录" class="headerlink" title="1. cd到工程目录"></a>1. cd到工程目录</h4><p>cd /Users/shaoxionghua/ios/test</p>
<h4 id="2-status一下"><a href="#2-status一下" class="headerlink" title="2. status一下"></a>2. status一下</h4><p>git status<br>（ps：会出现一下类似的东西）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  On branch develop</div><div class="line">Your branch is up-to-date with &apos;origin/develop&apos;.</div><div class="line">Changes not staged for commit:</div><div class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</div><div class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</div><div class="line">	modified:   .DS_Store</div><div class="line">	modified:   Live.xcworkspace/xcuserdata/shaoxionghua.xcuserdatad/UserInterfaceState.xcuserstate</div><div class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</div></pre></td></tr></table></figure>
<h4 id="3-rm这些不需要的文件或者路径"><a href="#3-rm这些不需要的文件或者路径" class="headerlink" title="3. rm这些不需要的文件或者路径"></a>3. rm这些不需要的文件或者路径</h4><p>git rm –cached .DS_Store<br>  git rm –cached Live.xcworkspace/xcuserdata/shaoxionghua.xcuserdatad/UserInterfaceState.xcuserstate</p>
<h4 id="4-提交这些变更"><a href="#4-提交这些变更" class="headerlink" title="4. 提交这些变更"></a>4. 提交这些变更</h4><p>git commit -m ‘ignore’</p>
<h4 id="5-最好执行一下pull和push"><a href="#5-最好执行一下pull和push" class="headerlink" title="5. 最好执行一下pull和push"></a>5. 最好执行一下pull和push</h4><p>git pull<br>git push</p>
<h2 id="第二种方法"><a href="#第二种方法" class="headerlink" title="第二种方法"></a>第二种方法</h2><h4 id="1-cd到工程目录-1"><a href="#1-cd到工程目录-1" class="headerlink" title="1. cd到工程目录"></a>1. cd到工程目录</h4><p>cd /Users/shaoxionghua/ios/test</p>
<h4 id="2-修改-gitignore文件"><a href="#2-修改-gitignore文件" class="headerlink" title="2. 修改.gitignore文件"></a>2. 修改.gitignore文件</h4><p>一般常见的一些设置如下：<br>(ps:在.gitignore文件里面写入如下内容，不要问我这个文件在哪里，不要问我怎么打开它，方法请自行百度或者google)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">*.xcuserstate  </div><div class="line">project.xcworkspace  </div><div class="line">xcuserdata  </div><div class="line">UserInterfaceState.xcuserstate  </div><div class="line">project.xcworkspace/  </div><div class="line">xcuserdata/  </div><div class="line">UserInterface.xcuserstate</div><div class="line">*.DS_Store</div></pre></td></tr></table></figure>
<h4 id="3-提交修改gitignore文件"><a href="#3-提交修改gitignore文件" class="headerlink" title="3. 提交修改gitignore文件"></a>3. 提交修改gitignore文件</h4><p>git rm -r –cached .<br>git add .<br>git commit -m ‘update .gitignore’</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS组件化 " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/11/大象iOS组件化调研（一）/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/11/大象iOS组件化调研（一）/" itemprop="url">
                  大象iOS组件调研（一）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-11T09:23:35+08:00">
                2017-04-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：华文杰</p>
</blockquote>
<ol>
<li><p>组件化概念</p>
<ul>
<li><p>什么是组件化？</p>
<p>“组件”一般来说用于命名比较小的功能块，如：下拉刷新组件，提示框组件。而较大的业务功能则称为”模块“。</p>
<p>而一般iOS中的组件化只的是模块和组件的结合（个人理解），或者这两者之间本身就不应该有过于明确的界限</p>
<blockquote>
<p>从工程代码层面来说，组件化得实施通常是通过中间件解决组件间文件直接引用的、依赖混乱的问题；从实际开发来说，组件间最大的需求就是页面跳转，需要从组件A的pageA页面跳到组件B的pageB页面，避免ViewController头文件的直接依赖。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>为什么要组件?</p>
<ul>
<li>组件化解决了什么问题。<ul>
<li>就iOS 而言，解耦了VC，使代码的管理及维护成本更低（长期维护，多人接手）</li>
<li>此外组件化可以提高开发效率（开发者只需关心自己的组件）</li>
<li>这也符合编程的封装性，以及面向对象（更深入的理解，一切皆对象）</li>
<li>方便测试。</li>
<li>提高代码可复用性，多个APP时可使用相同的代码</li>
</ul>
</li>
</ul>
</li>
<li><p>如何划分组件？</p>
<ul>
<li>基础组件（一般是第三方控件，自己的功用控件，与业务不太相关）</li>
<li>基础业务SDK （可以跨APP，例如登录模块，建议组件化时分为View 和 Model 分离）</li>
<li>个性业务组件（一般以业务为划分）</li>
</ul>
</li>
<li><p>对于没有实施过组件化的工程来说，应该如何开始呢？</p>
<ul>
<li>基础模块拆分。如，性能统计，NewWorking，Patch，网络请求，数据存储，</li>
<li>业务模块划分。一般登录可以先拆分，之后再以基本的模块拆分，一般以Tabbar为划分</li>
</ul>
</li>
<li><p>组件拆分的技术要点</p>
<ul>
<li><p>代码可以用CocosPods 配合 git做代码管理 物理拆分</p>
</li>
<li><p>而组件间如何解耦的话</p>
<p>有兴趣可以看看蘑菇街的方案，和安居客的方案。个人是建议安居客的方案</p>
</li>
</ul>
<p>​</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-iOS组件化 " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/11/大象iOS组件化调研（二）/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="jcapp">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/jc_logo.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="金诚App团队blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="金诚App团队blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/04/11/大象iOS组件化调研（二）/" itemprop="url">
                  大象iOS组件调研（二）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-11T09:23:15+08:00">
                2017-04-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>作者：华文杰</p>
</blockquote>
<h2 id="CocoaPods配合git做代码版本管理"><a href="#CocoaPods配合git做代码版本管理" class="headerlink" title="CocoaPods配合git做代码版本管理"></a>CocoaPods配合git做代码版本管理</h2><ol>
<li><p>先在公司服务器上创建一个git库</p>
<p>然后下载下来，</p>
</li>
<li><p>在本地git库中创建podspec文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod spec create JCLogin</div></pre></td></tr></table></figure>
</li>
<li><p>打开JCLogin.podspec，然后将git地址改为本地git库的地址</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">s.source       = &#123; :git =&gt; &quot;本地git库地址&quot; &#125;</div><div class="line">s.source_files  = &apos;**/*.&#123;h,m&#125;&apos;</div></pre></td></tr></table></figure>
<p>这里如果有.a等第三方静态库集成的时候可能会遇到找不到.a文件或者链接错误，从stackoverflow里，找到配置library的写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">s.source_files = &apos;StaticLib/Headers/*.h&apos;</div><div class="line">s.preserve_paths = &apos;StaticLib/libYourLibrary.a&apos;</div><div class="line">s.library = &apos;YourLibrary&apos;</div><div class="line">s.xcconfig = &#123; &apos;LIBRARY_SEARCH_PATHS&apos; =&gt; &apos;$(PODS_ROOT)/ProjectFolder/LibraryFolder&apos; &#125;    </div><div class="line"></div><div class="line">s.dependency = &apos;AFNetworking&apos;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><p>如同使用其他pod一样</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pod &apos;JCLogin&apos;, :path =&gt; &apos;本地库地址&apos;</div></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/jc_logo.png"
               alt="jcapp" />
          <p class="site-author-name" itemprop="name">jcapp</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jcapp</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    
    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  

  

  

  


  

</body>
</html>
